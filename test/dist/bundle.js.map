{"version":3,"file":"bundle.js","sources":["../../node_modules/zora/dist/zora.es.js","../../lib/util.js","../../lib/traverse.js","../util.js","../../node_modules/smart-table-operators/index.js","../../lib/dom-util.js","../dom-util.js","../../lib/h.js","../../lib/tree.js","../../lib/update.js","../../lib/lifecycles.js","../../lib/with-state.js","../../lib/connect.js","../h.js","../test-util.js","../lifecycles.js","../render.js","../update.js","../with-state.js","../../node_modules/lodash-es/_freeGlobal.js","../../node_modules/lodash-es/_root.js","../../node_modules/lodash-es/_Symbol.js","../../node_modules/lodash-es/_getRawTag.js","../../node_modules/lodash-es/_objectToString.js","../../node_modules/lodash-es/_baseGetTag.js","../../node_modules/lodash-es/_overArg.js","../../node_modules/lodash-es/_getPrototype.js","../../node_modules/lodash-es/isObjectLike.js","../../node_modules/lodash-es/isPlainObject.js","../../node_modules/symbol-observable/es/ponyfill.js","../../node_modules/symbol-observable/es/index.js","../../node_modules/redux/es/createStore.js","../../node_modules/redux/es/utils/warning.js","../../node_modules/redux/es/compose.js","../../node_modules/redux/es/index.js","../connect.js","../index.js"],"sourcesContent":["const stringify = JSON.stringify;\nconst printTestHeader = test => console.log(`# ${test.description} - ${test.executionTime}ms`);\nconst printTestCase = (assertion, id) => {\n\tconst pass = assertion.pass;\n\tconst status = pass === true ? 'ok' : 'not ok';\n\tconsole.log(`${status} ${id} ${assertion.message}`);\n\tif (pass !== true) {\n\t\tconsole.log(`  ---\n    operator: ${assertion.operator}\n    expected: ${stringify(assertion.expected)}\n    actual: ${stringify(assertion.actual)}\n    at: ${(assertion.at || '')}\n  ...\n`);\n\t}\n};\nconst printSummary = ({count, pass, fail, skipped, executionTime}) => {\n\tconsole.log(`\n1..${count}\n# duration ${executionTime}ms\n# ${skipped > 0 ? '🚨' : ''}tests ${count} (${skipped} skipped)\n# pass  ${pass}\n# ${fail > 0 ? '🚨' : ''}fail  ${fail} \n\t\t`);\n};\n\nvar tap = ({displaySkipped = false} = {}) => function * () {\n\tconst startTime = Date.now();\n\tlet pass = 0;\n\tlet fail = 0;\n\tlet id = 0;\n\tlet skipped = 0;\n\tconsole.log('TAP version 13');\n\ttry {\n\t\t/* eslint-disable no-constant-condition */\n\t\twhile (true) {\n\t\t\tconst test = yield;\n\n\t\t\tif (test.items.length === 0) {\n\t\t\t\tskipped++;\n\t\t\t}\n\n\t\t\tif (test.items.length > 0 || displaySkipped === true) {\n\t\t\t\tprintTestHeader(test);\n\t\t\t}\n\n\t\t\tfor (const assertion of test.items) {\n\t\t\t\tid++;\n\t\t\t\tif (assertion.pass === true) {\n\t\t\t\t\tpass++;\n\t\t\t\t} else {\n\t\t\t\t\tfail++;\n\t\t\t\t}\n\t\t\t\tprintTestCase(assertion, id);\n\t\t\t}\n\t\t}\n\t\t/* eslint-enable no-constant-condition */\n\t} catch (err) {\n\t\tconsole.log('Bail out! unhandled exception');\n\t\tthrow err;\n\t} finally {\n\t\tconst executionTime = Date.now() - startTime;\n\t\tprintSummary({count: id, executionTime, skipped, pass, fail});\n\t}\n};\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar keys = createCommonjsModule(function (module, exports) {\nexports = module.exports = typeof Object.keys === 'function'\n  ? Object.keys : shim;\n\nexports.shim = shim;\nfunction shim (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n});\n\nvar keys_1 = keys.shim;\n\nvar is_arguments = createCommonjsModule(function (module, exports) {\nvar supportsArgumentsClass = (function(){\n  return Object.prototype.toString.call(arguments)\n})() == '[object Arguments]';\n\nexports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\nexports.supported = supported;\nfunction supported(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n}\n\nexports.unsupported = unsupported;\nfunction unsupported(object){\n  return object &&\n    typeof object == 'object' &&\n    typeof object.length == 'number' &&\n    Object.prototype.hasOwnProperty.call(object, 'callee') &&\n    !Object.prototype.propertyIsEnumerable.call(object, 'callee') ||\n    false;\n}\n});\n\nvar is_arguments_1 = is_arguments.supported;\nvar is_arguments_2 = is_arguments.unsupported;\n\nvar deepEqual_1 = createCommonjsModule(function (module) {\nvar pSlice = Array.prototype.slice;\n\n\n\nvar deepEqual = module.exports = function (actual, expected, opts) {\n  if (!opts) opts = {};\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (actual instanceof Date && expected instanceof Date) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') {\n    return opts.strict ? actual === expected : actual == expected;\n\n  // 7.4. For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected, opts);\n  }\n};\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer (x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') return false;\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  var i, key;\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  //~~~I've managed to break Object.keys through screwy arguments passing.\n  //   Converting to array solves the problem.\n  if (is_arguments(a)) {\n    if (!is_arguments(b)) {\n      return false;\n    }\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return deepEqual(a, b, opts);\n  }\n  if (isBuffer(a)) {\n    if (!isBuffer(b)) {\n      return false;\n    }\n    if (a.length !== b.length) return false;\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  try {\n    var ka = keys(a),\n        kb = keys(b);\n  } catch (e) {//happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) return false;\n  }\n  return typeof a === typeof b;\n}\n});\n\nconst getAssertionLocation = () => {\n\tconst err = new Error();\n\tconst stack = (err.stack || '').split('\\n');\n\treturn (stack[3] || '').replace(/^at/i, '').trim();\n};\nconst assertMethodHook = fn => function (...args) {\n\tconst assertResult = fn(...args);\n\n\tif (assertResult.pass === false) {\n\t\tassertResult.at = getAssertionLocation();\n\t}\n\n\tthis.collect(assertResult);\n\treturn assertResult;\n};\n\nconst Assertion = {\n\tok: assertMethodHook((val, message = 'should be truthy') => ({\n\t\tpass: Boolean(val),\n\t\tactual: val,\n\t\texpected: true,\n\t\tmessage,\n\t\toperator: 'ok'\n\t})),\n\tdeepEqual: assertMethodHook((actual, expected, message = 'should be equivalent') => ({\n\t\tpass: deepEqual_1(actual, expected),\n\t\tactual,\n\t\texpected,\n\t\tmessage,\n\t\toperator: 'deepEqual'\n\t})),\n\tequal: assertMethodHook((actual, expected, message = 'should be equal') => ({\n\t\tpass: actual === expected,\n\t\tactual,\n\t\texpected,\n\t\tmessage,\n\t\toperator: 'equal'\n\t})),\n\tnotOk: assertMethodHook((val, message = 'should not be truthy') => ({\n\t\tpass: !val,\n\t\texpected: false,\n\t\tactual: val,\n\t\tmessage,\n\t\toperator: 'notOk'\n\t})),\n\tnotDeepEqual: assertMethodHook((actual, expected, message = 'should not be equivalent') => ({\n\t\tpass: !deepEqual_1(actual, expected),\n\t\tactual,\n\t\texpected,\n\t\tmessage,\n\t\toperator: 'notDeepEqual'\n\t})),\n\tnotEqual: assertMethodHook((actual, expected, message = 'should not be equal') => ({\n\t\tpass: actual !== expected,\n\t\tactual,\n\t\texpected,\n\t\tmessage,\n\t\toperator: 'notEqual'\n\t})),\n\tthrows: assertMethodHook((func, expected, message) => {\n\t\tlet caught;\n\t\tlet pass;\n\t\tlet actual;\n\t\tif (typeof expected === 'string') {\n\t\t\t[expected, message] = [message, expected];\n\t\t}\n\t\ttry {\n\t\t\tfunc();\n\t\t} catch (err) {\n\t\t\tcaught = {error: err};\n\t\t}\n\t\tpass = caught !== undefined;\n\t\tactual = caught && caught.error;\n\t\tif (expected instanceof RegExp) {\n\t\t\tpass = expected.test(actual) || expected.test(actual && actual.message);\n\t\t\texpected = String(expected);\n\t\t} else if (typeof expected === 'function' && caught) {\n\t\t\tpass = actual instanceof expected;\n\t\t\tactual = actual.constructor;\n\t\t}\n\t\treturn {\n\t\t\tpass,\n\t\t\texpected,\n\t\t\tactual,\n\t\t\toperator: 'throws',\n\t\t\tmessage: message || 'should throw'\n\t\t};\n\t}),\n\tdoesNotThrow: assertMethodHook((func, expected, message) => {\n\t\tlet caught;\n\t\tif (typeof expected === 'string') {\n\t\t\t[expected, message] = [message, expected];\n\t\t}\n\t\ttry {\n\t\t\tfunc();\n\t\t} catch (err) {\n\t\t\tcaught = {error: err};\n\t\t}\n\t\treturn {\n\t\t\tpass: caught === undefined,\n\t\t\texpected: 'no thrown error',\n\t\t\tactual: caught && caught.error,\n\t\t\toperator: 'doesNotThrow',\n\t\t\tmessage: message || 'should not throw'\n\t\t};\n\t}),\n\tfail: assertMethodHook((message = 'fail called') => ({\n\t\tpass: false,\n\t\tactual: 'fail called',\n\t\texpected: 'fail not called',\n\t\tmessage,\n\t\toperator: 'fail'\n\t}))\n};\n\nvar assert = collect => Object.create(Assertion, {collect: {value: collect}});\n\nconst noop = () => {};\n\nconst skip = description => test('SKIPPED - ' + description, noop);\n\nconst Test = {\n\tasync run() {\n\t\tconst collect = assertion => this.items.push(assertion);\n\t\tconst start = Date.now();\n\t\tawait Promise.resolve(this.spec(assert(collect)));\n\t\tconst executionTime = Date.now() - start;\n\t\treturn Object.assign(this, {\n\t\t\texecutionTime\n\t\t});\n\t},\n\tskip() {\n\t\treturn skip(this.description);\n\t}\n};\n\nfunction test(description, spec, {only = false} = {}) {\n\treturn Object.create(Test, {\n\t\titems: {value: []},\n\t\tonly: {value: only},\n\t\tspec: {value: spec},\n\t\tdescription: {value: description}\n\t});\n}\n\nconst onNextTick = val => new Promise(resolve => setTimeout(() => resolve(val), 0));\n\nconst PlanProto = {\n\t[Symbol.iterator]() {\n\t\treturn this.items[Symbol.iterator]();\n\t},\n\ttest(description, spec, opts) {\n\t\tif (!spec && description.test) {\n\t\t\t// If it is a plan\n\t\t\tthis.items.push(...description);\n\t\t} else {\n\t\t\tthis.items.push(test(description, spec, opts));\n\t\t}\n\t\treturn this;\n\t},\n\tonly(description, spec) {\n\t\treturn this.test(description, spec, {only: true});\n\t},\n\tskip(description, spec) {\n\t\tif (!spec && description.test) {\n\t\t\t// If it is a plan we skip the whole plan\n\t\t\tfor (const t of description) {\n\t\t\t\tthis.items.push(t.skip());\n\t\t\t}\n\t\t} else {\n\t\t\tthis.items.push(skip(description));\n\t\t}\n\t\treturn this;\n\t},\n\tasync run(sink = tap()) {\n\t\tconst sinkIterator = sink();\n\t\tsinkIterator.next();\n\t\ttry {\n\t\t\tconst hasOnly = this.items.some(t => t.only);\n\t\t\tconst tests = hasOnly ? this.items.map(t => t.only ? t : t.skip()) : this.items;\n\t\t\tconst runningTests = tests.map(t => t.run());\n\t\t\t/* eslint-disable no-await-in-loop */\n\t\t\tfor (const r of runningTests) {\n\t\t\t\tconst executedTest = await onNextTick(r); // Force to resolve on next tick so consumer can do something with previous iteration result (until async iterator are natively supported ...)\n\t\t\t\tsinkIterator.next(executedTest);\n\t\t\t}\n\t\t\t/* eslint-enable no-await-in-loop */\n\t\t} catch (err) {\n\t\t\tsinkIterator.throw(err);\n\t\t} finally {\n\t\t\tsinkIterator.return();\n\t\t}\n\t}\n};\n\nfunction factory() {\n\treturn Object.create(PlanProto, {\n\t\titems: {value: []}, length: {\n\t\t\tget() {\n\t\t\t\treturn this.items.length;\n\t\t\t}\n\t\t}\n\t});\n}\n\nexport default factory;\n","export const nextTick = fn => setTimeout(fn, 0);\n\nexport const pairify = holder => key => [key, holder[key]];\n\nexport const isShallowEqual = (a, b) => {\n\tconst aKeys = Object.keys(a);\n\tconst bKeys = Object.keys(b);\n\treturn aKeys.length === bKeys.length && aKeys.every(k => a[k] === b[k]);\n};\n\nconst ownKeys = obj => Object.getOwnPropertyNames(obj);\n\nexport const isDeepEqual = (a, b) => {\n\tconst type = typeof a;\n\tconst typeB = typeof b;\n\n\t// Short path(s)\n\tif (a === b) {\n\t\treturn true;\n\t}\n\n\tif (type !== typeB) {\n\t\treturn false;\n\t}\n\n\tif (type !== 'object') {\n\t\treturn a === b;\n\t}\n\n\t// Objects ...\n\tif (a === null || b === null) {\n\t\treturn false;\n\t}\n\n\tif (Array.isArray(a)) {\n\t\treturn a.length && b.length && a.every((item, i) => isDeepEqual(a[i], b[i]));\n\t}\n\n\tconst aKeys = ownKeys(a);\n\tconst bKeys = ownKeys(b);\n\treturn aKeys.length === bKeys.length && aKeys.every(k => isDeepEqual(a[k], b[k]));\n};\n\nexport const identity = a => a;\n\nexport const noop = () => {};\n","export default function * traverse(vnode) {\n\tyield vnode;\n\tif (vnode.children && vnode.children.length > 0) {\n\t\tfor (const child of vnode.children) {\n\t\t\tyield * traverse(child);\n\t\t}\n\t}\n}\n","import zora from 'zora';\nimport {isShallowEqual, pairify} from '../lib/util';\nimport traverse from '../lib/traverse';\n\nexport default zora()\n  .test('should traverse a tree (going deep first)', t => {\n    const tree = {\n      id: 1,\n      children: [\n        {id: 2, children: [{id: 3}, {id: 4}]},\n        {id: 5, children: [{id: 6}]},\n        {id: 7}\n      ]\n    };\n\n    const sequence = [...traverse(tree)].map(n => n.id);\n    t.deepEqual(sequence, [1, 2, 3, 4, 5, 6, 7]);\n  })\n  .test('pair key to value object of an object (aka Object.entries)', t => {\n    const holder = {a: 1, b: 2, c: 3, d: 4};\n    const f = pairify(holder);\n    const data = Object.keys(holder).map(f);\n    t.deepEqual(data, [['a', 1], ['b', 2], ['c', 3], ['d', 4]]);\n  })\n  .test('shallow equality test on object', t => {\n    const nested = {foo: 'bar'};\n    const obj1 = {a: 1, b: '2', c: true, d: nested};\n    t.ok(isShallowEqual(obj1, {a: 1, b: '2', c: true, d: nested}));\n    t.notOk(isShallowEqual(obj1, {\n      a: 1,\n      b: '2',\n      c: true,\n      d: {foo: 'bar'}\n    }), 'nested object should be checked by reference');\n    t.notOk(isShallowEqual(obj1, {a: 1, b: 2, c: true, d: nested}), 'exact type checking on primitive');\n    t.notOk(isShallowEqual(obj1, {a: 1, c: true, d: nested}), 'return false on missing properties');\n    t.notOk(isShallowEqual({a: 1, c: true, d: nested}, obj1), 'return false on missing properties (commmutative');\n  });\n","export function swap (f) {\n  return (a, b) => f(b, a);\n}\n\nexport function compose (first, ...fns) {\n  return (...args) => fns.reduce((previous, current) => current(previous), first(...args));\n}\n\nexport function curry (fn, arityLeft) {\n  const arity = arityLeft || fn.length;\n  return (...args) => {\n    const argLength = args.length || 1;\n    if (arity === argLength) {\n      return fn(...args);\n    } else {\n      const func = (...moreArgs) => fn(...args, ...moreArgs);\n      return curry(func, arity - args.length);\n    }\n  };\n}\n\nexport function apply (fn) {\n  return (...args) => fn(...args);\n}\n\nexport function tap (fn) {\n  return arg => {\n    fn(arg);\n    return arg;\n  }\n}","import {tap} from 'smart-table-operators';\n\n/* eslint-disable no-undef */\nconst SVG_NP = 'http://www.w3.org/2000/svg';\n\nconst updateDomNodeFactory = method => items => tap(domNode => {\n\tfor (const pair of items) {\n\t\tdomNode[method](...pair);\n\t}\n});\n\nexport const removeEventListeners = updateDomNodeFactory('removeEventListener');\n\nexport const addEventListeners = updateDomNodeFactory('addEventListener');\n\nexport const setAttributes = items => tap(domNode => {\n\tconst attributes = items.filter(pair => typeof pair.value !== 'function');\n\tfor (const [key, value] of attributes) {\n\t\tif (value === false) {\n\t\t\tdomNode.removeAttribute(key);\n\t\t} else {\n\t\t\tdomNode.setAttribute(key, value);\n\t\t}\n\t}\n});\n\nexport const removeAttributes = items => tap(domNode => {\n\tfor (const attr of items) {\n\t\tdomNode.removeAttribute(attr);\n\t}\n});\n\nexport const setTextNode = val => node => {\n\tnode.textContent = val;\n};\n\nexport const createDomNode = (vnode, parent) => {\n\tif (vnode.nodeType === 'svg') {\n\t\treturn document.createElementNS(SVG_NP, vnode.nodeType);\n\t} else if (vnode.nodeType === 'Text') {\n\t\treturn document.createTextNode(vnode.nodeType);\n\t}\n\treturn parent.namespaceURI === SVG_NP ?\n\t\tdocument.createElementNS(SVG_NP, vnode.nodeType) :\n\t\tdocument.createElement(vnode.nodeType);\n};\n\nexport const getEventListeners = props => Object.keys(props)\n\t.filter(k => k.substr(0, 2) === 'on')\n\t.map(k => [k.substr(2).toLowerCase(), props[k]]);\n/* eslint-enable no-undef */\n","import {\n\tsetAttributes,\n\tremoveAttributes,\n\taddEventListeners,\n\tremoveEventListeners,\n\tsetTextNode,\n\tgetEventListeners\n} from '../lib/dom-util';\nimport {noop} from '../lib/util';\nimport zora from 'zora';\n\nconst domProto = {\n\n\tremoveAttribute(attr) {\n\t\tdelete this[attr];\n\t},\n\n\tsetAttribute(attr, val) {\n\t\tthis[attr] = val;\n\t},\n\n\taddEventListener(event, handler) {\n\t\tthis.handlers[event] = handler;\n\t},\n\n\tremoveEventListener(event, handler) {\n\t\tdelete this.handlers[event];\n\t}\n};\n\nconst fakeDom = () => {\n\tconst dom = Object.create(domProto);\n\tObject.defineProperty(dom, 'handlers', {value: {}});\n\treturn dom;\n};\n\nconst ownProps = (obj) => {\n\tconst ownProperties = [];\n\tfor (let prop in obj) {\n\t\tif (obj.hasOwnProperty(prop)) {\n\t\t\townProperties.push(prop);\n\t\t}\n\t}\n\treturn ownProperties;\n};\n\n\nexport default zora()\n\t.test('set attributes', t => {\n\t\tconst d = fakeDom();\n\t\tconst update = setAttributes([['foo', 'bar'], ['blah', 2], ['woot', true]]);\n\t\tconst n = update(d);\n\t\tt.equal(n, d, 'should have forwarded dom node');\n\t\tt.equal(d.foo, 'bar');\n\t\tt.equal(d.blah, 2);\n\t\tt.equal(d.woot, true);\n\t\tconst props = ownProps(d);\n\t\tt.deepEqual(props, ['foo', 'blah', 'woot']);\n\t\tconst handlers = ownProps(d.handlers);\n\t\tt.equal(handlers.length, 0);\n\t})\n\t.test('remove attribute if value is false', t => {\n\t\tconst d = fakeDom();\n\t\td.foo = 'bar';\n\t\tt.deepEqual(ownProps(d), ['foo']);\n\t\tconst update = setAttributes([['foo', false]]);\n\t\tconst n = update(d);\n\t\tt.equal(n, d, 'should have forwarded dom node');\n\t\tt.equal(d.foo, undefined);\n\t\tt.equal(ownProps(d).length, 0);\n\t\tconst handlers = ownProps(d.handlers);\n\t\tt.equal(handlers.length, 0);\n\t})\n\t.test('remove attributes', t => {\n\t\tconst d = fakeDom();\n\t\td.foo = 'bar';\n\t\td.woot = 2;\n\t\td.bar = 'blah';\n\t\tt.deepEqual(ownProps(d), ['foo', 'woot', 'bar']);\n\t\tconst update = removeAttributes(['foo', 'woot']);\n\t\tconst n = update(d);\n\t\tt.equal(n, d, 'should have forwarded dom node');\n\t\tt.equal(d.bar, 'blah');\n\t\tt.equal(ownProps(d).length, 1);\n\t\tconst handlers = ownProps(d.handlers);\n\t\tt.equal(handlers.length, 0);\n\t})\n\t.test('add event listeners', t => {\n\t\tconst d = fakeDom();\n\t\tconst update = addEventListeners([['click', noop\n\t\t], ['input', noop]]);\n\t\tconst n = update(d);\n\t\tt.equal(n, d, 'should have forwarded the node');\n\t\tt.equal(ownProps(d).length, 0);\n\t\tt.deepEqual(ownProps(d.handlers), ['click', 'input']);\n\t\tt.equal(d.handlers.click, noop);\n\t\tt.equal(d.handlers.input, noop);\n\t})\n\t.test('remove event listeners', t => {\n\t\tconst d = fakeDom();\n\t\td.handlers.click = noop;\n\t\td.handlers.input = noop;\n\t\tconst update = removeEventListeners([['click', noop\n\t\t]]);\n\t\tconst n = update(d);\n\t\tt.equal(n, d, 'should have forwarded the node');\n\t\tt.deepEqual(ownProps(d.handlers), ['input']);\n\t\tt.equal(d.handlers.input, noop);\n\t})\n\t.test('set text node value', function * (t) {\n\t\tconst node = {};\n\t\tconst update = setTextNode('foo');\n\t\tupdate(node);\n\t\tt.equal(node.textContent, 'foo');\n\t})\n\t.test('get event Listeners from props object', t => {\n\t\tconst props = {\n\t\t\tonClick: () => {\n\t\t\t},\n\t\t\tinput: () => {\n\t\t\t},\n\t\t\tonMousedown: () => {\n\t\t\t}\n\t\t};\n\n\t\tconst events = getEventListeners(props);\n\t\tt.deepEqual(events, [\n\t\t\t['click', props.onClick],\n\t\t\t['mousedown', props.onMousedown],\n\t\t]);\n\t});","const createTextVNode = value => ({\n\tnodeType: 'Text',\n\tchildren: [],\n\tprops: {value},\n\tlifeCycle: 0\n});\n\nconst normalize = (children, currentText = '', normalized = []) => {\n\tif (children.length === 0) {\n\t\tif (currentText) {\n\t\t\tnormalized.push(createTextVNode(currentText));\n\t\t}\n\t\treturn normalized;\n\t}\n\n\tconst child = children.shift();\n\tconst type = typeof child;\n\tif (type === 'object' || type === 'function') {\n\t\tif (currentText) {\n\t\t\tnormalized.push(createTextVNode(currentText));\n\t\t\tcurrentText = '';\n\t\t}\n\t\tnormalized.push(child);\n\t} else {\n\t\tcurrentText += child;\n\t}\n\n\treturn normalize(children, currentText, normalized);\n};\n\n/**\n * Transform hyperscript into virtual dom node\n * @param nodeType {Function, String} - the HTML tag if string, a component or combinator otherwise\n * @param props {Object} - the list of properties/attributes associated to the related node\n * @param children - the virtual dom nodes related to the current node children\n * @returns {Object} - a virtual dom node\n */\nexport default function h(nodeType, props, ...children) {\n\tconst flatChildren = [];\n\tfor (const c of children) {\n\t\tif (Array.isArray(c)) {\n\t\t\tflatChildren.push(...c);\n\t\t} else {\n\t\t\tflatChildren.push(c);\n\t\t}\n\t}\n\n\tconst normalizedChildren = normalize(flatChildren);\n\n\tif (typeof nodeType !== 'function') { // Regular html/text node\n\t\treturn {\n\t\t\tnodeType,\n\t\t\tprops,\n\t\t\tchildren: normalizedChildren,\n\t\t\tlifeCycle: 0\n\t\t};\n\t}\n\n\tconst fullProps = Object.assign({children: normalizedChildren}, props);\n\tconst comp = nodeType(fullProps);\n\tconst compType = typeof comp;\n\t/* eslint-disable no-negated-condition */\n\treturn compType !== 'function' ? comp : h(comp, props, ...normalizedChildren); // Functional comp vs combinator (HOC)\n\t/* eslint-enable no-negated-condition */\n}\n","import {compose, curry} from 'smart-table-operators';\nimport {\n\tisShallowEqual,\n\tpairify,\n\tnextTick,\n\tnoop\n} from './util';\nimport {\n\tremoveAttributes,\n\tsetAttributes,\n\tsetTextNode,\n\tcreateDomNode,\n\tremoveEventListeners,\n\taddEventListeners,\n\tgetEventListeners\n} from './dom-util';\nimport traverse from './traverse';\n\nconst updateEventListeners = ({props: newNodeProps} = {}, {props: oldNodeProps} = {}) => {\n\tconst newNodeEvents = getEventListeners(newNodeProps || {});\n\tconst oldNodeEvents = getEventListeners(oldNodeProps || {});\n\n\treturn newNodeEvents.length || oldNodeEvents.length ?\n\t\tcompose(\n\t\t\tremoveEventListeners(oldNodeEvents),\n\t\t\taddEventListeners(newNodeEvents)\n\t\t) : noop;\n};\n\nconst updateAttributes = (newVNode, oldVNode) => {\n\tconst newVNodeProps = newVNode.props || {};\n\tconst oldVNodeProps = oldVNode.props || {};\n\n\tif (isShallowEqual(newVNodeProps, oldVNodeProps)) {\n\t\treturn noop;\n\t}\n\n\tif (newVNode.nodeType === 'Text') {\n\t\treturn setTextNode(newVNode.props.value);\n\t}\n\n\tconst newNodeKeys = Object.keys(newVNodeProps);\n\tconst oldNodeKeys = Object.keys(oldVNodeProps);\n\tconst attributesToRemove = oldNodeKeys.filter(k => !newNodeKeys.includes(k));\n\n\treturn compose(\n\t\tremoveAttributes(attributesToRemove),\n\t\tsetAttributes(newNodeKeys.map(pairify(newVNodeProps)))\n\t);\n};\n\nconst domFactory = createDomNode;\n\n// Apply vnode diffing to actual dom node (if new node => it will be mounted into the parent)\nconst domify = (oldVnode, newVnode, parentDomNode) => {\n\tif (!oldVnode && newVnode) { // There is no previous vnode\n\t\tnewVnode.dom = parentDomNode.appendChild(domFactory(newVnode, parentDomNode));\n\t\tnewVnode.lifeCycle = 1;\n\t\treturn {vnode: newVnode, garbage: null};\n\t}\n\n\t// There is a previous vnode\n\tif (!newVnode) { // We must remove the related dom node\n\t\tparentDomNode.removeChild(oldVnode.dom);\n\t\treturn ({garbage: oldVnode, dom: null});\n\t} else if (newVnode.nodeType !== oldVnode.nodeType) { // It must be replaced\n\t\tnewVnode.dom = domFactory(newVnode, parentDomNode);\n\t\tnewVnode.lifeCycle = 1;\n\t\tparentDomNode.replaceChild(newVnode.dom, oldVnode.dom);\n\t\treturn {garbage: oldVnode, vnode: newVnode};\n\t}\n\n\t// Only update attributes\n\tnewVnode.dom = oldVnode.dom;\n\t// Pass the unMountHook\n\tif (oldVnode.onUnMount) {\n\t\tnewVnode.onUnMount = oldVnode.onUnMount;\n\t}\n\tnewVnode.lifeCycle = oldVnode.lifeCycle + 1;\n\treturn {garbage: null, vnode: newVnode};\n};\n\n/**\n * Render a virtual dom node, diffing it with its previous version, mounting it in a parent dom node\n * @param oldVnode\n * @param newVnode\n * @param parentDomNode\n * @param onNextTick collect operations to be processed on next tick\n * @returns {Array}\n */\nexport const render = (oldVnode, newVnode, parentDomNode, onNextTick = []) => {\n\t// 1. transform the new vnode to a vnode connected to an actual dom element based on vnode versions diffing\n\t// \ti. note at this step occur dom insertions/removals\n\t// \tii. it may collect sub tree to be dropped (or \"unmounted\")\n\tconst {vnode, garbage} = domify(oldVnode, newVnode, parentDomNode);\n\n\tif (garbage !== null) {\n\t\t// Defer unmount lifecycle as it is not \"visual\"\n\t\tfor (const g of traverse(garbage)) {\n\t\t\tif (g.onUnMount) {\n\t\t\t\tonNextTick.push(g.onUnMount);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Normalisation of old node (in case of a replace we will consider old node as empty node (no children, no props))\n\tconst tempOldNode = garbage !== null || !oldVnode ? {length: 0, children: [], props: {}} : oldVnode;\n\n\tif (vnode) {\n\t\t// 2. update dom attributes based on vnode prop diffing.\n\t\t// Sync\n\t\tif (vnode.onUpdate && vnode.lifeCycle > 1) {\n\t\t\tvnode.onUpdate();\n\t\t}\n\n\t\tupdateAttributes(vnode, tempOldNode)(vnode.dom);\n\n\t\t// Fast path\n\t\tif (vnode.nodeType === 'Text') {\n\t\t\treturn onNextTick;\n\t\t}\n\n\t\tif (vnode.onMount && vnode.lifeCycle === 1) {\n\t\t\tonNextTick.push(() => vnode.onMount());\n\t\t}\n\n\t\tconst childrenCount = Math.max(tempOldNode.children.length, vnode.children.length);\n\n\t\t// Async will be deferred as it is not \"visual\"\n\t\tconst setListeners = updateEventListeners(vnode, tempOldNode);\n\t\tif (setListeners !== noop) {\n\t\t\tonNextTick.push(() => setListeners(vnode.dom));\n\t\t}\n\n\t\t// 3. recursively traverse children to update dom and collect functions to process on next tick\n\t\tif (childrenCount > 0) {\n\t\t\tfor (let i = 0; i < childrenCount; i++) {\n\t\t\t\t// We pass onNextTick as reference (improve perf: memory + speed)\n\t\t\t\trender(tempOldNode.children[i], vnode.children[i], vnode.dom, onNextTick);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn onNextTick;\n};\n\nexport const hydrate = (vnode, dom) => {\n\tconst hydrated = Object.assign({}, vnode);\n\tconst domChildren = Array.from(dom.childNodes).filter(n => n.nodeType !== 3 || n.nodeValue.trim() !== '');\n\thydrated.dom = dom;\n\thydrated.children = vnode.children.map((child, i) => hydrate(child, domChildren[i]));\n\treturn hydrated;\n};\n\nexport const mount = curry((comp, initProp, root) => {\n\t/* eslint-disable no-negated-condition */\n\t/* eslint-disable no-void */\n\tconst vnode = comp.nodeType !== void 0 ? comp : comp(initProp || {});\n\t/* eslint-enable no-void */\n\t/* eslint-enable no-negated-condition */\n\tconst oldVNode = root.children.length ? hydrate(vnode, root.children[0]) : null;\n\tconst batch = render(oldVNode, vnode, root);\n\tnextTick(() => {\n\t\tfor (const op of batch) {\n\t\t\top();\n\t\t}\n\t});\n\treturn vnode;\n});\n","import {render} from './tree';\nimport {nextTick} from './util';\n\n/**\n * Create a function which will trigger an update of the component with the passed state\n * @param comp {Function} - the component to update\n * @param initialVNode - the initial virtual dom node related to the component (ie once it has been mounted)\n * @returns {Function} - the update function\n */\nexport default (comp, initialVNode) => {\n\tlet oldNode = initialVNode;\n\treturn (props, ...args) => {\n\t\tconst mount = oldNode.dom.parentNode;\n\t\tconst newNode = comp(Object.assign({children: oldNode.children || []}, oldNode.props, props), ...args);\n\t\tconst nextBatch = render(oldNode, newNode, mount);\n\n\t\t// Danger zone !!!!\n\t\t// Change by keeping the same reference so the eventual parent node does not need to be \"aware\" tree may have changed downstream: oldNode may be the child of someone ...(well that is a tree data structure after all :P )\n\t\toldNode = Object.assign(oldNode || {}, newNode);\n\t\t// End danger zone\n\n\t\tnextTick(() => {\n\t\t\tfor (const op of nextBatch) {\n\t\t\t\top();\n\t\t\t}\n\t\t});\n\n\t\treturn newNode;\n\t};\n};\n","import {curry, compose} from 'smart-table-operators';\n\nconst lifeCycleFactory = method => curry((fn, comp) => (props, ...args) => {\n\tconst n = comp(props, ...args);\n\tconst applyFn = () => fn(n, ...args);\n\tconst current = n[method];\n\tn[method] = current ? compose(current, applyFn) : applyFn;\n\treturn n;\n});\n\n/**\n * Life cycle: when the component is mounted\n */\nexport const onMount = lifeCycleFactory('onMount');\n\n/**\n * Life cycle: when the component is unmounted\n */\nexport const onUnMount = lifeCycleFactory('onUnMount');\n\n/**\n * Life cycle: before the component is updated\n */\nexport const onUpdate = lifeCycleFactory('onUpdate');\n","import {compose} from 'smart-table-operators';\nimport update from './update';\nimport {onMount, onUpdate} from './lifecycles';\n\n/**\n * Combinator to create a \"stateful component\": ie it will have its own state and the ability to update its own tree\n * @param comp {Function} - the component\n * @returns {Function} - a new wrapped component\n */\nexport default comp => () => {\n\tlet updateFunc;\n\tconst wrapperComp = (props, ...args) => {\n\t\t// Lazy evaluate updateFunc (to make sure it is defined\n\t\tconst setState = newState => updateFunc(newState);\n\t\treturn comp(props, setState, ...args);\n\t};\n\tconst setUpdateFunction = vnode => {\n\t\tupdateFunc = update(wrapperComp, vnode);\n\t};\n\n\treturn compose(onMount(setUpdateFunction), onUpdate(setUpdateFunction))(wrapperComp);\n};\n","import {compose} from 'smart-table-operators';\nimport update from './update';\nimport {onMount, onUnMount} from './lifecycles';\nimport {isDeepEqual, identity} from './util';\n\nconst defaultUpdate = (a, b) => isDeepEqual(a, b) === false;\n\n/**\n * Connect combinator: will create \"container\" component which will subscribe to a Redux like store. and update its children whenever a specific slice of state change under specific circumstances\n * @param store {Object} - The store (implementing the same api than Redux store\n * @param sliceState {Function} [state => state] - A function which takes as argument the state and return a \"transformed\" state (like partial, etc) relevant to the container\n * @returns {Function} - A container factory with the following arguments:\n *  - mapStateToProp: a function which takes as argument what the \"sliceState\" function returns and returns an object to be blended into the properties of the component (default to identity function)\n *  - shouldUpdate: a function which takes as arguments the previous and the current versions of what \"sliceState\" function returns to returns a boolean defining whether the component should be updated (default to a deepEqual check)\n */\nexport default (store, sliceState = identity) =>\n\t(comp, mapStateToProp = identity, shouldUpate = defaultUpdate) => initProp => {\n\t\tconst componentProps = initProp;\n\t\tlet updateFunc;\n\t\tlet previousStateSlice;\n\t\tlet unsubscriber;\n\n\t\tconst wrapperComp = (props, ...args) => {\n\t\t\treturn comp(Object.assign(props, mapStateToProp(sliceState(store.getState()))), ...args);\n\t\t};\n\n\t\tconst subscribe = onMount(vnode => {\n\t\t\tupdateFunc = update(wrapperComp, vnode);\n\t\t\tunsubscriber = store.subscribe(() => {\n\t\t\t\tconst stateSlice = sliceState(store.getState());\n\t\t\t\tif (shouldUpate(previousStateSlice, stateSlice) === true) {\n\t\t\t\t\tObject.assign(componentProps, mapStateToProp(stateSlice));\n\t\t\t\t\tupdateFunc(componentProps);\n\t\t\t\t\tpreviousStateSlice = stateSlice;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tconst unsubscribe = onUnMount(() => {\n\t\t\tunsubscriber();\n\t\t});\n\n\t\treturn compose(subscribe, unsubscribe)(wrapperComp);\n\t};\n","import zora from 'zora';\nimport {h} from '../index';\n\nexport default zora()\n\t.test('create regular html node', t => {\n\t\tconst vnode = h('div', {id: 'someId', 'class': 'special'});\n\t\tt.deepEqual(vnode, {lifeCycle: 0, nodeType: 'div', props: {id: 'someId', 'class': 'special'}, children: []});\n\t})\n\t.test('normalize text node', t => {\n\t\tconst vnode = h('div', {id: 'someId', 'class': 'special'}, 'foo', 'bar');\n\t\tt.deepEqual(vnode, {\n\t\t\tnodeType: 'div',\n\t\t\tprops: {id: 'someId', class: 'special'},\n\t\t\tchildren: [{nodeType: 'Text', children: [], props: {'value': 'foobar'}, lifeCycle: 0}],\n\t\t\tlifeCycle: 0\n\t\t});\n\t})\n\t.test('create regular html node with text node children', t => {\n\t\tconst vnode = h('div', {id: 'someId', 'class': 'special'}, 'foo');\n\t\tt.deepEqual(vnode, {\n\t\t\tnodeType: 'div', lifeCycle: 0, props: {id: 'someId', 'class': 'special'}, children: [{\n\t\t\t\tnodeType: 'Text',\n\t\t\t\tchildren: [],\n\t\t\t\tprops: {value: 'foo'},\n\t\t\t\tlifeCycle: 0\n\t\t\t}]\n\t\t});\n\t})\n\t.test('create regular html with children', t => {\n\t\tconst vnode = h('ul', {id: 'collection'}, h('li', {id: 1}, 'item1'), h('li', {id: 2}, 'item2'));\n\t\tt.deepEqual(vnode, {\n\t\t\tnodeType: 'ul',\n\t\t\tprops: {id: 'collection'},\n\t\t\tlifeCycle: 0,\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\tnodeType: 'li',\n\t\t\t\t\tprops: {id: 1},\n\t\t\t\t\tlifeCycle: 0,\n\t\t\t\t\tchildren: [{\n\t\t\t\t\t\tnodeType: 'Text',\n\t\t\t\t\t\tprops: {value: 'item1'},\n\t\t\t\t\t\tchildren: [],\n\t\t\t\t\t\tlifeCycle: 0\n\t\t\t\t\t}]\n\t\t\t\t}, {\n\t\t\t\t\tnodeType: 'li',\n\t\t\t\t\tprops: {id: 2},\n\t\t\t\t\tlifeCycle: 0,\n\t\t\t\t\tchildren: [{\n\t\t\t\t\t\tnodeType: 'Text',\n\t\t\t\t\t\tprops: {value: 'item2'},\n\t\t\t\t\t\tchildren: [],\n\t\t\t\t\t\tlifeCycle: 0\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t})\n\t.test('use function as component passing the children as prop', t => {\n\t\tconst foo = (props) => h('p', props);\n\t\tconst vnode = h(foo, {id: 1}, 'hello world');\n\t\tt.deepEqual(vnode, {\n\t\t\tnodeType: 'p',\n\t\t\tlifeCycle: 0,\n\t\t\tprops: {\n\t\t\t\tchildren: [{\n\t\t\t\t\tnodeType: 'Text',\n\t\t\t\t\tlifeCycle: 0,\n\t\t\t\t\tchildren: [],\n\t\t\t\t\tprops: {value: 'hello world'}\n\t\t\t\t}],\n\t\t\t\tid: 1\n\t\t\t},\n\t\t\tchildren: []\n\t\t});\n\t})\n\t.test('use nested combinator to create vnode', t => {\n\t\tconst combinator = () => () => () => () => (props) => h('p', {id: 'foo'});\n\t\tconst vnode = h(combinator, {});\n\t\tt.deepEqual(vnode, {nodeType: 'p', lifeCycle: 0, props: {id: 'foo'}, children: []});\n\t})\n","export const waitNextTick = () => new Promise(function (resolve) {\n\tsetTimeout(function () {\n\t\tresolve();\n\t}, 2)\n});\n","import zora from 'zora';\nimport {onMount, onUnMount, h, mount, render} from '../index';\nimport {waitNextTick} from './test-util'\n\nexport default zora()\n\t.test('should run a function when component is mounted', async t => {\n\t\tlet counter = 0;\n\t\tconst container = document.createElement('div');\n\t\tconst comp = () => <p>hello world</p>;\n\t\tconst withMount = onMount(() => {\n\t\t\tcounter++\n\t\t}, comp);\n\t\tmount(withMount, {}, container);\n\t\tt.equal(counter, 0);\n\t\tawait waitNextTick();\n\t\tt.equal(counter, 1);\n\t})\n\t.test('should compose the mount function when there are many', async t => {\n\t\tlet counter = 0;\n\t\tconst container = document.createElement('div');\n\t\tconst comp = () => <p>hello world</p>;\n\t\tconst withMount = onMount(() => {\n\t\t\tcounter++\n\t\t}, comp);\n\t\tconst Combined = onMount(() => {\n\t\t\tcounter = counter * 10\n\t\t}, withMount);\n\t\tmount(Combined, {}, container);\n\t\tt.equal(counter, 0);\n\t\tawait waitNextTick();\n\t\tt.equal(counter, 10);\n\t})\n\t.test('should run a function when component is unMounted', t => {\n\t\tlet unmounted = null;\n\t\tconst container = document.createElement('div');\n\t\tconst Item = onUnMount((n) => {\n\t\t\tunmounted = n;\n\t\t}, ({id}) => <li id={id}>hello world</li>);\n\t\tconst containerComp = (({items}) => (<ul>\n\t\t\t{\n\t\t\t\titems.map(item => <Item {...item}/>)\n\t\t\t}\n\t\t</ul>));\n\n\t\tconst vnode = mount(containerComp, {items: [{id: 1}, {id: 2}, {id: 3}]}, container);\n\t\tt.equal(container.innerHTML, '<ul><li id=\"1\">hello world</li><li id=\"2\">hello world</li><li id=\"3\">hello world</li></ul>');\n\t\tconst batch = render(vnode, containerComp({items: [{id: 1}, {id: 3}]}), container);\n\t\tt.equal(container.innerHTML, '<ul><li id=\"1\">hello world</li><li id=\"3\">hello world</li></ul>');\n\t\tfor (let f of batch) {\n\t\t\tf();\n\t\t}\n\t\tt.notEqual(unmounted, null);\n\t})\n","import zora from 'zora';\nimport {mount, h} from '../index';\n\nexport default zora()\n\t.test('mount a simple component', t => {\n\t\tconst container = document.createElement('div');\n\t\tconst Comp = (props) => (<h1><span id={props.id}>{props.greeting}</span></h1>);\n\t\tmount(Comp, {id: 123, greeting: 'hello world'}, container);\n\t\tt.equal(container.innerHTML, '<h1><span id=\"123\">hello world</span></h1>');\n\t})\n\t.test('mount composed component', t => {\n\t\tconst container = document.createElement('div');\n\t\tconst Comp = (props) => (<h1><span id={props.id}>{props.greeting}</span></h1>);\n\t\tconst Container = (props) => (<section>\n\t\t\t<Comp id=\"567\" greeting=\"hello you\"/>\n\t\t</section>);\n\t\tmount(Container, {}, container);\n\t\tt.equal(container.innerHTML, '<section><h1><span id=\"567\">hello you</span></h1></section>');\n\t})\n\t.test('mount a component with inner child', t => {\n\t\tconst container = document.createElement('div');\n\t\tconst Comp = (props) => (<h1><span id={props.id}>{props.greeting}</span></h1>);\n\t\tconst Container = (props) => (<section>{props.children}</section>);\n\t\tmount(() => <Container><Comp id=\"567\" greeting=\"hello world\"/></Container>, {}, container);\n\t\tt.equal(container.innerHTML, '<section><h1><span id=\"567\">hello world</span></h1></section>');\n\t})\n","import zora from 'zora';\nimport {update, mount, h} from '../index';\n\nexport default zora()\n\t.test('give ability to update a node (and its descendant)', t => {\n\t\tconst container = document.createElement('div');\n\t\tconst comp = (({id, content}) => (<p id={id}>{content}</p>));\n\t\tconst initialVnode = mount(comp, {id: 123, content: 'hello world'}, container);\n\t\tt.equal(container.innerHTML, '<p id=\"123\">hello world</p>');\n\t\tconst updateFunc = update(comp, initialVnode);\n\t\tupdateFunc({id: 567, content: 'bonjour monde'});\n\t\tt.equal(container.innerHTML, '<p id=\"567\">bonjour monde</p>');\n\t});\n","import zora from 'zora';\nimport {h, withState, mount} from '../index';\nimport {waitNextTick} from './test-util';\n\nexport default zora()\n  .test('bind an update function to a component', async t => {\n    let update = null;\n    const Comp = withState(({foo}, setState) => {\n      if (!update) {\n        update = setState;\n      }\n      return <p>{foo}</p>;\n    });\n    const container = document.createElement('div');\n    mount(({foo}) => <Comp foo={foo}/>, {foo: 'bar'}, container);\n    t.equal(container.innerHTML, '<p>bar</p>');\n    await waitNextTick();\n    update({foo: 'bis'});\n    t.equal(container.innerHTML, '<p>bis</p>');\n  })\n  .test('should create isolated state for each component', async t => {\n    let update1 = null;\n    let update2 = null;\n    const Comp = withState(({foo}, setState) => {\n      if (!update1) {\n        update1 = setState;\n      } else if (!update2) {\n        update2 = setState;\n      }\n\n      return <p>{foo}</p>;\n    });\n    const container = document.createElement('div');\n    mount(({foo1, foo2}) => <div><Comp foo={foo1}/><Comp foo={foo2}/></div>, {foo1: 'bar', foo2: 'bar2'}, container);\n    t.equal(container.innerHTML, '<div><p>bar</p><p>bar2</p></div>');\n    await waitNextTick();\n    update1({foo: 'bis'});\n    t.equal(container.innerHTML, '<div><p>bis</p><p>bar2</p></div>');\n    update2({foo: 'blah'});\n    t.equal(container.innerHTML, '<div><p>bis</p><p>blah</p></div>');\n  });","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","import isPlainObject from 'lodash-es/isPlainObject';\nimport $$observable from 'symbol-observable';\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nexport var ActionTypes = {\n  INIT: '@@redux/INIT'\n\n  /**\n   * Creates a Redux store that holds the state tree.\n   * The only way to change the data in the store is to call `dispatch()` on it.\n   *\n   * There should only be a single store in your app. To specify how different\n   * parts of the state tree respond to actions, you may combine several reducers\n   * into a single reducer function by using `combineReducers`.\n   *\n   * @param {Function} reducer A function that returns the next state tree, given\n   * the current state tree and the action to handle.\n   *\n   * @param {any} [preloadedState] The initial state. You may optionally specify it\n   * to hydrate the state from the server in universal apps, or to restore a\n   * previously serialized user session.\n   * If you use `combineReducers` to produce the root reducer function, this must be\n   * an object with the same shape as `combineReducers` keys.\n   *\n   * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n   * to enhance the store with third-party capabilities such as middleware,\n   * time travel, persistence, etc. The only store enhancer that ships with Redux\n   * is `applyMiddleware()`.\n   *\n   * @returns {Store} A Redux store that lets you read the state, dispatch actions\n   * and subscribe to changes.\n   */\n};export default function createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n  function getState() {\n    return currentState;\n  }\n\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected listener to be a function.');\n    }\n\n    var isSubscribed = true;\n\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      isSubscribed = false;\n\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n    };\n  }\n\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer;\n    dispatch({ type: ActionTypes.INIT });\n  }\n\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object') {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return { unsubscribe: unsubscribe };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  }\n\n  // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n  dispatch({ type: ActionTypes.INIT });\n\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}","/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nexport default function warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n    /* eslint-disable no-empty */\n  } catch (e) {}\n  /* eslint-enable no-empty */\n}","/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\n\nexport default function compose() {\n  for (var _len = arguments.length, funcs = Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(undefined, arguments));\n    };\n  });\n}","import createStore from './createStore';\nimport combineReducers from './combineReducers';\nimport bindActionCreators from './bindActionCreators';\nimport applyMiddleware from './applyMiddleware';\nimport compose from './compose';\nimport warning from './utils/warning';\n\n/*\n* This is a dummy function to check if the function name has been altered by minification.\n* If the function has been minified and NODE_ENV !== 'production', warn the user.\n*/\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \\'production\\'. ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { createStore, combineReducers, bindActionCreators, applyMiddleware, compose };","import zora from 'zora';\nimport {h, connect, mount} from '../index';\nimport {createStore} from 'redux';\nimport {waitNextTick} from './test-util';\n\nexport default zora()\n  .test('should connect a component to changes of redux state', async t => {\n    const store = createStore((state, action) => ({value: action.value}));\n    const Comp = connect(store)(props => {\n      return <span>{props.value}</span>\n    });\n    const container = document.createElement('div');\n    mount(<Comp />, {}, container);\n    await waitNextTick();\n    store.dispatch({type: 'whatever', value: 'blah'});\n    t.equal(container.innerHTML, '<span>blah</span>');\n    store.dispatch({type: 'whatever', value: 'woot'});\n    t.equal(container.innerHTML, '<span>woot</span>');\n  })\n  .test('should connect a component to changes of a slice of a redux state', async t => {\n    const store = createStore((state = {woot: {value: 'foo'}, other: {valueBis: 'blah'}}, action) => {\n      const {type} = action;\n      switch (type) {\n        case 'WOOT':\n          return Object.assign({}, {woot: {value: action.value}});\n        case 'NOT_WOOT':\n          return Object.assign({}, {other: {valueBis: 'another_one'}});\n        default:\n          return state;\n      }\n    });\n    const Comp = connect(store, state => state.woot)(props => {\n      return <span>{props.value}</span>\n    });\n    const container = document.createElement('div');\n    mount(<Comp />, {}, container);\n    await waitNextTick();\n    store.dispatch({type: 'whatever', value: 'blah'});\n    t.equal(container.innerHTML, '<span>foo</span>');\n    store.dispatch({type: 'NOT_WOOT', value: 'blah'});\n    t.equal(container.innerHTML, '<span>foo</span>');\n    store.dispatch({type: 'WOOT', value: 'bip'});\n    t.equal(container.innerHTML, '<span>bip</span>');\n  })\n  .test('should give a condition to update a connected component', async t => {\n    const store = createStore((state, action) => ({value: action.value}));\n    const Comp = connect(store)(props => {\n      return <span>{props.value}</span>\n    }, state => state, (oldState = {value: 'a'}, newState = {}) => {\n      return newState.value > oldState.value;\n    });\n    const container = document.createElement('div');\n    mount(<Comp />, {}, container);\n    await waitNextTick();\n    store.dispatch({type: 'whatever', value: 'blah'});\n    t.equal(container.innerHTML, '<span>blah</span>');\n    store.dispatch({type: 'whatever', value: 'aaa'});\n    t.equal(container.innerHTML, '<span>blah</span>');\n    store.dispatch({type: 'whatever', value: 'zzz'});\n    t.equal(container.innerHTML, '<span>zzz</span>');\n  });\n","import zora from 'zora';\nimport util from './util';\nimport domUtil from './dom-util';\nimport h from './h';\nimport lifecycles from './lifecycles';\nimport render from './render';\nimport update from './update'\nimport withState from './with-state';\nimport connect from './connect';\n\nexport default zora()\n\t.test(util)\n\t.test(domUtil)\n\t.test(h)\n\t.test(lifecycles)\n\t.test(render)\n\t.test(update)\n\t.test(withState)\n\t.test(connect)\n\t.run();\n"],"names":["stringify","JSON","printTestHeader","test","console","log","description","executionTime","printTestCase","assertion","id","pass","status","message","operator","expected","actual","at","printSummary","count","fail","skipped","tap","displaySkipped","startTime","Date","now","items","length","err","createCommonjsModule","fn","module","exports","keys","Object","shim","obj","key","push","keys_1","is_arguments","supportsArgumentsClass","prototype","toString","call","arguments","supported","unsupported","object","hasOwnProperty","propertyIsEnumerable","is_arguments_1","is_arguments_2","deepEqual_1","pSlice","Array","slice","deepEqual","opts","getTime","strict","objEquiv","isUndefinedOrNull","value","undefined","isBuffer","x","copy","a","b","i","ka","kb","e","sort","getAssertionLocation","Error","stack","split","replace","trim","assertMethodHook","args","assertResult","collect","Assertion","val","Boolean","func","caught","error","RegExp","String","constructor","assert","create","noop","skip","Test","run","start","Promise","resolve","spec","assign","only","onNextTick","setTimeout","PlanProto","Symbol","iterator","t","sink","sinkIterator","next","hasOnly","some","tests","map","runningTests","r","executedTest","throw","return","factory","nextTick","pairify","holder","isShallowEqual","aKeys","bKeys","every","k","ownKeys","getOwnPropertyNames","isDeepEqual","type","typeB","isArray","item","identity","traverse","vnode","children","child","zora","tree","sequence","n","c","d","f","data","nested","foo","obj1","ok","notOk","compose","first","fns","reduce","previous","current","curry","arityLeft","arity","argLength","moreArgs","arg","SVG_NP","updateDomNodeFactory","method","domNode","pair","removeEventListeners","addEventListeners","setAttributes","attributes","filter","removeAttribute","setAttribute","removeAttributes","attr","setTextNode","node","textContent","createDomNode","parent","nodeType","document","createElementNS","createTextNode","namespaceURI","createElement","getEventListeners","props","substr","toLowerCase","domProto","event","handler","handlers","fakeDom","dom","defineProperty","ownProps","ownProperties","prop","update","equal","blah","woot","bar","click","input","events","onClick","onMousedown","createTextVNode","normalize","currentText","normalized","shift","h","flatChildren","normalizedChildren","fullProps","comp","compType","updateEventListeners","newNodeProps","oldNodeProps","newNodeEvents","oldNodeEvents","updateAttributes","newVNode","oldVNode","newVNodeProps","oldVNodeProps","newNodeKeys","oldNodeKeys","attributesToRemove","includes","domFactory","domify","oldVnode","newVnode","parentDomNode","appendChild","lifeCycle","garbage","removeChild","replaceChild","onUnMount","render","g","tempOldNode","onUpdate","onMount","childrenCount","Math","max","setListeners","hydrate","hydrated","domChildren","from","childNodes","nodeValue","mount","initProp","root","batch","op","initialVNode","oldNode","parentNode","newNode","nextBatch","lifeCycleFactory","applyFn","updateFunc","wrapperComp","setState","newState","setUpdateFunction","defaultUpdate","store","sliceState","mapStateToProp","shouldUpate","componentProps","previousStateSlice","unsubscriber","getState","subscribe","stateSlice","unsubscribe","class","combinator","waitNextTick","counter","container","withMount","Combined","unmounted","Item","containerComp","innerHTML","notEqual","Comp","greeting","Container","content","initialVnode","withState","update1","update2","foo1","foo2","freeGlobal","global","freeSelf","self","Function","objectProto","nativeObjectToString","symToStringTag","toStringTag","getRawTag","isOwn","tag","unmasked","result","objectToString","nullTag","undefinedTag","baseGetTag","overArg","transform","getPrototype","getPrototypeOf","isObjectLike","objectTag","funcProto","funcToString","objectCtorString","isPlainObject","proto","Ctor","symbolObservablePonyfill","observable","window","ponyfill","ActionTypes","createStore","reducer","preloadedState","enhancer","_ref2","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","listener","isSubscribed","index","indexOf","splice","dispatch","action","listeners","replaceReducer","nextReducer","INIT","_ref","outerSubscribe","observer","TypeError","observeState","$$observable","warning","isCrushed","name","state","connect","other","valueBis","oldState","util","domUtil","lifecycles"],"mappings":"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"}